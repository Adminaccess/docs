(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{209:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var a=n(1),r=n(9),o=(n(0),n(215)),i={id:"FormResponses2PDF",title:"Form Response to PDF",sidebar_label:"Form Response to PDF (alpha)"},l={id:"FormResponses2PDF",title:"Form Response to PDF",description:"## 1. Overview",source:"@site/docs/PDF Module - Form Response to PDF.md",permalink:"/docs/docs/FormResponses2PDF",editUrl:"https://github.com/Samagra-Development/docs/edit/master/docs/PDF Module - Form Response to PDF.md",sidebar_label:"Form Response to PDF (alpha)",sidebar:"someSidebar",previous:{title:"Google Docs to PDF",permalink:"/docs/docs/GoogleDoc2PDF"},next:{title:"HTML Pages to PDF",permalink:"/docs/docs/HTML2PDF"}},c=[{value:"1. Overview",id:"1-overview",children:[]},{value:"2. Setup Module",id:"2-setup-module",children:[{value:"2.0 Disclaimer",id:"20-disclaimer",children:[]},{value:"2.1 Setting up on a local system",id:"21-setting-up-on-a-local-system",children:[]},{value:"2.2 Setting up on Server",id:"22-setting-up-on-server",children:[]},{value:"2.3 Generating PDFs",id:"23-generating-pdfs",children:[]},{value:"2.4 Retrieving PDFs",id:"24-retrieving-pdfs",children:[]}]},{value:"3. FAQs",id:"3-faqs",children:[]},{value:"4. Coming Soon",id:"4-coming-soon",children:[]}],s={rightToc:c};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"1-overview"},"1. Overview"),Object(o.b)("p",null,"Over the past few years, various day to day functions of governments in India are being rapidly digitized. Information generated from these functions is stored online and made available through dashboards to enable data backed decision making within the government. However, traditionally, reviews within the government heavily relied on printed sheets of data rigorously arranged and distributed to every participant."),Object(o.b)("p",null,"It is against this backdrop of an evolving ecosystem of data representation for governance decision making that there was a need to bridge the traditional practice of decision making through paper based reviews to a completely online, dashboard driven reviews."),Object(o.b)("p",null,"Key Features"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Convert ODK Form Responses to PDF"),Object(o.b)("li",{parentName:"ul"},"Convert Google Forms to PDF"),Object(o.b)("li",{parentName:"ul"},"Make a base project to convert other forms of templated media to PDF, example Markdown, Images, email etc. This can be done through extending the base converter to suit your needs.")),Object(o.b)("h2",{id:"2-setup-module"},"2. Setup Module"),Object(o.b)("h3",{id:"20-disclaimer"},"2.0 Disclaimer"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("em",{parentName:"li"},"Note that this project in alpha and the APIs can change without notice. Please use it at your discretion. Though we use it in production, but the we are yet to close the API specification")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("em",{parentName:"li"},"This doc assumes you have already done the ODK setup for the the setup"))),Object(o.b)("h3",{id:"21-setting-up-on-a-local-system"},"2.1 Setting up on a local system"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 0:")," Clone the base system."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"git clone https://gitlab.com/Rishabh0402/template-to-pdf")),Object(o.b)("li",{parentName:"ul"},"Setup the master branch")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 1:")," Create a Virutal Environment and install the local dependencies"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"pip install -r requirements.txt")),Object(o.b)("li",{parentName:"ul"},"to test the setup")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 2.")," Setting up database"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Setup the ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"dSmall"}),"PSQL server")),Object(o.b)("li",{parentName:"ul"},"Update the credentials of PSQL in the ",Object(o.b)("inlineCode",{parentName:"li"},"config.py")," file."),Object(o.b)("li",{parentName:"ul"},"Migrating the database")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 3.")," Setup the Google Credentials"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"for service account credentials on google developer console."),Object(o.b)("li",{parentName:"ul"},"Enable the following API => Google Docs, Google Sheets, Google Cloud Storage."),Object(o.b)("li",{parentName:"ul"},"Configure consent screen."),Object(o.b)("li",{parentName:"ul"},"Creating a Oauth2 access token json from Google developer console."),Object(o.b)("li",{parentName:"ul"},"Updating the app and ",Object(o.b)("inlineCode",{parentName:"li"},"instance")," folder which have the same thing."),Object(o.b)("li",{parentName:"ul"},"Setting up ",Object(o.b)("em",{parentName:"li"},"Google cloud storage bucket."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 4.")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Setting up Google App Scripts and publishing it as a web app. This will require you to be the admin of the app or it won't work. (See network tab on Google Chrome dev console if you have issues with it)"),Object(o.b)("li",{parentName:"ul"},"Update the url in ",Object(o.b)("inlineCode",{parentName:"li"},"config.py"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 5.")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Setting up the template"),Object(o.b)("li",{parentName:"ul"},"Setting up the ingestor")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Step 6.")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Adding ODK credentials to ",Object(o.b)("inlineCode",{parentName:"li"},"config.py"))),Object(o.b)("h3",{id:"22-setting-up-on-server"},"2.2 Setting up on Server"),Object(o.b)("p",null,"Coming Soon ..."),Object(o.b)("h3",{id:"23-generating-pdfs"},"2.3 Generating PDFs"),Object(o.b)("p",null,"PDF will be continuously generated as long as you have ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://developers.google.com/apps-script/guides/services/quotas"}),"Google App Script Quota"),"."),Object(o.b)("h3",{id:"24-retrieving-pdfs"},"2.4 Retrieving PDFs"),Object(o.b)("p",null,"To retrieve PDFs use the APIs. Detailed API doc available ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"APIDocPDFGen"}),"here")),Object(o.b)("h2",{id:"3-faqs"},"3. FAQs"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"1. What will the data collection API return?"),' It will return {"status": status, "uniqueId": uniqueId} for all requests.'),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"2. What will the status checking API return?")," It will return the final url of the pdf uploaded to GCS or the current status. Check section \u201cOutput for Status Checking API\u201d."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"3. How will you get the pdf url if it is 300th request in 1 minute?"),' The data collection API will implement queuing and it\u2019ll return response {"status": status, "uniqueId": uniqueId} for all requests. But the status checking API will return the current status of the request. Check section \u201cOutput for Status Checking API\u201d.'),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"4. How will you check if the pdf is generated for a particular request?")," It can be done via the status checking API. It will check the status of your request by providing the uniqueID, varMappingID, docTemplateID. If the pdf is generated and uploaded to GCS then it\u2019ll return the url of uploaded PDF, else it\u2019ll return the current status of the request. OR you can create a custom route which can search using any of the available data from the database."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"5. When the template placeholder ",Object(o.b)("inlineCode",{parentName:"strong"},"<<19>>")," for an image/text is not found, what will it do.")," If the placeholder for an image/text is not found then no error or exception will be thrown, it\u2019ll be replaced by NO_TEXT_FOUND. The PDF will still be generated using the provided data and arguments."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"6. How will the queue process the requests?")," It will process requests in fifo order + we have a plan to implement priority queue.."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"7. What about API authentication")," The API uses Token authentication."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"8. When will the API retry for executing the request")," The API will retry only when the request is failed due to an unknown error."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"9. What will be the maximum number of retries?")," A request will be retried at max 3 times. Then it\u2019ll fail permanently."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"10. How long would it take to generate pdf for a particular request?")," The pdf for a request would be generated in less than a minute. But the uploading of PDF to the GCS takes place in the cycles (where 1 cycle means processing of 5 requests). So, the final PDF url would be available in about 5 minutes."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"11. How are bulk requests different from single requests?"),Object(o.b)("br",{parentName:"p"}),"\n","The Job ID for bulk should remain same but uniqueID will be different.",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("strong",{parentName:"p"},"12. What will happen when an option value is not found?"),Object(o.b)("br",{parentName:"p"}),"\n","Then it\u2019ll write NO_TEXT_FOUND in the placeholder.",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("strong",{parentName:"p"},"13. Will the software delete the intermediate files (doc files created on google drive)?"),Object(o.b)("br",{parentName:"p"}),"\n","Yes, it has a module called cache cleaner, which will delete the intermediate files."),Object(o.b)("h2",{id:"4-coming-soon"},"4. Coming Soon"),Object(o.b)("ul",{className:"contains-task-list"},Object(o.b)("li",Object(a.a)({parentName:"ul"},{className:"task-list-item"}),Object(o.b)("input",Object(a.a)({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","Monitoring setup"),Object(o.b)("li",Object(a.a)({parentName:"ul"},{className:"task-list-item"}),Object(o.b)("input",Object(a.a)({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","Single click setup except for the base project"),Object(o.b)("li",Object(a.a)({parentName:"ul"},{className:"task-list-item"}),Object(o.b)("input",Object(a.a)({parentName:"li"},{type:"checkbox",checked:!1,disabled:!0}))," ","FusionAuth integration")))}b.isMDXComponent=!0},215:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),b=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},u=function(e){var t=b(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=b(n),d=a,h=u["".concat(i,".").concat(d)]||u[d]||p[d]||o;return n?r.a.createElement(h,l({ref:t},s,{components:n})):r.a.createElement(h,l({ref:t},s))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);