(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{172:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return u}));var o=n(1),i=n(9),a=(n(0),n(202)),r={id:"NotificationModule",title:"Push Notifications Module",sidebar_label:"Push Notifications Module"},c={id:"NotificationModule",title:"Push Notifications Module",description:"## 1. Overview<br/>",source:"@site/docs/Notification Module.md",permalink:"/docs/docs/NotificationModule",editUrl:"https://github.com/Samagra-Development/docs/edit/master/docs/Notification Module.md",sidebar_label:"Push Notifications Module",sidebar:"someSidebar",previous:{title:"Cascading Search Module",permalink:"/docs/docs/CascadingSearchModule"},next:{title:"Offline Handling Module",permalink:"/docs/docs/OfflineHandlingModule"}},l=[{value:"1. Overview<br/>",id:"1-overview",children:[]},{value:"2. Setting up Push Notifications Module into your Project<br/>",id:"2-setting-up-push-notifications-module-into-your-project",children:[{value:"2.1.1 Downoading and integrating into main app project <br/><br/>",id:"211-downoading-and-integrating-into-main-app-project",children:[]},{value:"2.1.2 Setting up Firebase in your project <br/><br/>",id:"212-setting-up-firebase-in-your-project",children:[]},{value:"2.1.3 Using the Module <br/><br/>",id:"213-using-the-module",children:[]}]},{value:"FAQs",id:"faqs",children:[]},{value:"Coming Soon",id:"coming-soon",children:[]}],s={rightToc:l};function u(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"1-overview"},"1. Overview",Object(a.b)("br",null)),Object(a.b)("p",null,"Push notifications are an important part of the mobile experience. Users have grown accustomed to having push notifications be a part of virtually every app that they use. "),Object(a.b)("p",null,"For an app, the most effective way to receive push notifications is via Firebase Cloud Messaging Service. Firebase Cloud Messaging (FCM) is a cross-platform messaging solution that lets you reliably send messages at no cost. Using FCM, you can notify a client app that new email or other data is available to sync. You can send notification messages to drive user re-engagement and retention."),Object(a.b)("p",null,"The module that we have developed, contains a functionality to generate notifications received via FCM and also generate push notifications from within the app."),Object(a.b)("h2",{id:"2-setting-up-push-notifications-module-into-your-project"},"2. Setting up Push Notifications Module into your Project",Object(a.b)("br",null)),Object(a.b)("h3",{id:"211-downoading-and-integrating-into-main-app-project"},"2.1.1 Downoading and integrating into main app project ",Object(a.b)("br",null),Object(a.b)("br",null)),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Unzip the github project to a folder. You can find the github repository at this link. (Insert repo. link here). Download it as zip locally and then unzip the root directory."),Object(a.b)("li",{parentName:"ol"},"Launch Android Studio. Open the main project where you are to integrate these modules. "),Object(a.b)("li",{parentName:"ol"},"If you have not customworkmanager/commons module in the project, you would need to integrate these first sequentially, to integrate the notifications_module later, using the following steps."),Object(a.b)("li",{parentName:"ol"},"Click on your app module. Select New Module Option -> Select Import Gradle Project -> Go to the downloaded project directory -> Select the module, sync your gradle. In case you face dependency resolution errors, please see the downloaded project's main app and project gradle to see what dependencies you are missing."),Object(a.b)("li",{parentName:"ol"},"Please follow the same steps for the integration of notifications_module."),Object(a.b)("li",{parentName:"ol"},"Voila, the notification module has been integrated into your project. Please clean and rebuild your project.")),Object(a.b)("h3",{id:"212-setting-up-firebase-in-your-project"},"2.1.2 Setting up Firebase in your project ",Object(a.b)("br",null),Object(a.b)("br",null)),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"You must have firebase set up for your project. Set up Firebase and the FCM SDK. If you haven't already, ",Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"https://firebase.google.com/docs/android/setup"}),"add Firebase to your Android project"),"."),Object(a.b)("li",{parentName:"ol"},"In your project-level build.gradle file, make sure to include Google's Maven repository in both your buildscript and allprojects sections."),Object(a.b)("li",{parentName:"ol"},"Add the dependency for the Cloud Messaging Android library to your module (app-level) Gradle file (usually app/build.gradle)")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"implementation 'com.google.firebase:firebase-messaging:20.1.5'\n")),Object(a.b)("ol",{start:4},Object(a.b)("li",{parentName:"ol"},"You need to have Internet Permissions to interact with the FCM Server.")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),' <uses-permission android:name="android.permission.INTERNET" />\n')),Object(a.b)("ol",{start:5},Object(a.b)("li",{parentName:"ol"},"Voila, firebasee has been integrated into your project. Please clean and rebuild your project.")),Object(a.b)("h3",{id:"213-using-the-module"},"2.1.3 Using the Module ",Object(a.b)("br",null),Object(a.b)("br",null)),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Register the notification channel in your Application level class as follows:")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"  NotificationUtils.createNotificationChannel(this);\n  //this is the instance of the Application level class of your project.\n")),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},Object(a.b)("strong",{parentName:"li"},"Access the device registration token")," : On initial startup of your app, the FCM SDK generates a registration token for the client app instance. If you want to target single devices or create device groups, you'll need to access this token by extending  ",Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"https://firebase.google.com/docs/reference/android/com/google/firebase/messaging/FirebaseMessagingService"}),Object(a.b)("inlineCode",{parentName:"a"},"FirebaseMessagingService")),"  and overriding  ",Object(a.b)("inlineCode",{parentName:"li"},"onNewToken"),". This has already been taken care of by the module you integrated. You will just have to invoke the FirebaseMessagingService child class.")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),"new PushMessagingService().\n        setContext(context, API_URL, API_KEY).  \n                            getCurrentToken(context);\n ``` //Base API Url and API Key are for Fusion Auth API Integration related,\n if in case you are using Fusion auth for managing and authenticating user data.\n")),Object(a.b)("ol",{start:3},Object(a.b)("li",{parentName:"ol"},"You are set to go, if you would send a notification from Firebase, you should receive a notification on your device. "),Object(a.b)("li",{parentName:"ol"},Object(a.b)("strong",{parentName:"li"}," Sending the notification from within the app - "),"\nCall the following method wherever you want to send the notification")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{}),'Intent notifyIntent = new Intent(getActivityContext(), NotificationRenderingActivity.class);  \nnotifyIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  \nnotifyIntent.putExtra(NotificationRenderingActivity.NOTIFICATION_TITLE,"Notification Title");  \nnotifyIntent.putExtra(NotificationRenderingActivity.NOTIFICATION_MESSAGE, "Test message");   \nPendingIntent pendingNotify = PendingIntent.getActivity(getActivityContext(), REQUEST_CODE,  \n        notifyIntent, PendingIntent.FLAG_UPDATE_CURRENT);  \nAppNotificationUtils.showNotification(pendingNotify, NOTIFICATION_ID, "Notification Title", "Test Notification");\n')),Object(a.b)("p",null,"5.After this integration, you should be able to receive FCM Notifications on your device, as well also generate notifications from within your app. "),Object(a.b)("h2",{id:"faqs"},"FAQs"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Q1) How to test the FCM Notifications?"),Object(a.b)("br",null),Object(a.b)("br",null),"\nIn order to test and see how the FCM Notification is sent to your android device, please refer this ",Object(a.b)("a",Object(o.a)({parentName:"p"},{href:"https://firebase.google.com/docs/cloud-messaging/android/first-message"}),"tutorial"),".\n",Object(a.b)("em",{parentName:"p"},"Please note that this module is in continuous development phase, as soon as we push out new functionalities related to Push Notifications, we would keep adding the features here.")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Q2) How to manage the FCM Token?"),Object(a.b)("br",null),Object(a.b)("br",null),"\nFCM token is user specific, hence we suggest to store the FCM token for the user in the preferences, and we prefer to update the fcm token whenever the user log-in into the application, by checking if the new user logging in is different from the last user using the app."),Object(a.b)("h2",{id:"coming-soon"},"Coming Soon"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Notification Center in the app."),Object(a.b)("li",{parentName:"ol"},"Ability to read, delete and unread the app notifications."),Object(a.b)("li",{parentName:"ol"},"Including deep-link in the notifications to redirect user to specific app sections.")))}u.isMDXComponent=!0},202:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var o=n(0),i=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),u=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},b=function(e){var t=u(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},p=Object(o.forwardRef)((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=u(n),p=o,f=b["".concat(r,".").concat(p)]||b[p]||d[p]||a;return n?i.a.createElement(f,c({ref:t},s,{components:n})):i.a.createElement(f,c({ref:t},s))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=p;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,r[1]=c;for(var s=2;s<a;s++)r[s]=n[s];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);